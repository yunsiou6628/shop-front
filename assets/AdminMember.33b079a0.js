import{Q as p}from"./Ripple.9c46f039.js";import{Q as u}from"./QInput.213e3b9d.js";import{Q as f}from"./QBtn.ef0e5e56.js";import{Q as _,a as b}from"./QTable.6e322bae.js";import{r as x,B as h,e as g,f as w,j as a,k as i,m as n,af as m,_ as s,t as Q}from"./index.378566a4.js";import"./render.3cc31d86.js";import"./create.372fbcfd.js";import"./use-key-composition.afd4dec2.js";import"./QSpinner.4b2f0e3f.js";import"./use-dark.1a0fc61f.js";import"./focus-manager.d6507951.js";import"./QSeparator.4915e9b2.js";import"./QList.e24eaa5d.js";import"./QSelect.4e8ce2ab.js";import"./QItem.099e0acc.js";import"./QMenu.f660bdf5.js";import"./selection.e46da593.js";import"./focusout.fd6dd9f1.js";import"./use-timeout.b9818382.js";import"./scroll.f0d6a14f.js";import"./QDialog.7d6f80f3.js";import"./rtl.4b414a6d.js";import"./use-fullscreen.44b144d6.js";const y={class:"q-pa-xl"},v=n("div",{class:"q-pb-xl"},[n("div",{class:"text-h5 text-center text-weight-bold",style:{color:"#5E8A4B"}},"\u6703\u54E1\u7BA1\u7406")],-1),k=Q("\u522A\u9664"),X={__name:"AdminMember",setup(q){const l=x(""),r=h([]),c=[{name:"name",required:!0,label:"\u59D3\u540D",align:"left",field:e=>e.name,sortable:!0},{name:"account",required:!0,label:"\u5E33\u865F",align:"left",field:e=>e.account,sortable:!0},{name:"email",required:!0,label:"email",align:"left",field:e=>e.email,sortable:!0},{name:"edit",required:!0,label:"\u7DE8\u8F2F\u4FEE\u6539",align:"left",sortable:!0}],d=async e=>{try{await m.delete("/users/"+e),await s.fire({icon:"success",title:"\u522A\u9664\u6210\u529F"});const t=r.findIndex(o=>o._id===e);r.splice(t,1)}catch(t){s.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}};return(async()=>{try{const{data:e}=await m.get("/users/all");r.push(...e.result),console.log(r)}catch{s.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u4F7F\u7528\u8005\u8CC7\u6599"})}})(),(e,t)=>(g(),w("div",y,[v,a(_,{class:"text-grey-7",title:"\u6703\u54E1\u8CC7\u6599",rows:r,columns:c,"row-key":"name"},{"top-right":i(()=>[a(u,{borderless:"",dense:"",debounce:"300",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),placeholder:"Search"},{append:i(()=>[a(p,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-edit":i(o=>[a(b,null,{default:i(()=>[a(f,{onClick:V=>d(o.row._id)},{default:i(()=>[k]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["rows"])]))}};export{X as default};
