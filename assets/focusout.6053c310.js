import{v as C,d as P}from"./Ripple.fab7663c.js";import{w,y as N,g as O,I as x,U as v,r as E,C as Q,h as S,V as U,c as k,P as F,E as G}from"./index.368dcd51.js";import{r as D,b as K}from"./focus-manager.d6507951.js";const Z={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ee=["before-show","show","before-hide","hide"];function oe({showing:e,canShow:o,hideOnRouteChange:n,handleShow:d,handleHide:r,processOnMount:c}){const u=O(),{props:i,emit:l,proxy:h}=u;let a;function b(t){e.value===!0?V(t):y(t)}function y(t){if(i.disable===!0||t!==void 0&&t.qAnchorHandled===!0||o!==void 0&&o(t)!==!0)return;const p=i["onUpdate:modelValue"]!==void 0;p===!0&&(l("update:modelValue",!0),a=t,x(()=>{a===t&&(a=void 0)})),(i.modelValue===null||p===!1)&&M(t)}function M(t){e.value!==!0&&(e.value=!0,l("before-show",t),d!==void 0?d(t):l("show",t))}function V(t){if(i.disable===!0)return;const p=i["onUpdate:modelValue"]!==void 0;p===!0&&(l("update:modelValue",!1),a=t,x(()=>{a===t&&(a=void 0)})),(i.modelValue===null||p===!1)&&_(t)}function _(t){e.value!==!1&&(e.value=!1,l("before-hide",t),r!==void 0?r(t):l("hide",t))}function I(t){i.disable===!0&&t===!0?i["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):t===!0!==e.value&&(t===!0?M:_)(a)}w(()=>i.modelValue,I),n!==void 0&&C(u)===!0&&w(()=>h.$route.fullPath,()=>{n.value===!0&&e.value===!0&&V()}),c===!0&&N(()=>{I(i.modelValue)});const q={show:y,hide:V,toggle:b};return Object.assign(h,q),q}let L=document.body;function R(e){const o=document.createElement("div");if(e!==void 0&&(o.id=e),v.globalNodes!==void 0){const n=v.globalNodes.class;n!==void 0&&(o.className=n)}return L.appendChild(o),o}function j(e){e.remove()}const m=[];function te(e){return m.find(o=>o.__qPortalInnerRef.value!==null&&o.__qPortalInnerRef.value.contains(e))}function A(e,o){do{if(e.$options.name==="QMenu"){if(e.hide(o),e.$props.separateClosePopup===!0)return P(e)}else if(e.__qPortalInnerRef!==void 0){const n=P(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(o),n):e}e=P(e)}while(e!=null)}function ne(e,o,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortalInnerRef!==void 0){if(n--,e.$options.name==="QMenu"){e=A(e,o);continue}e.hide(o)}e=P(e)}}function H(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function ie(e,o,n,d){const r=E(!1),c=E(!1);let u=null;const i={},l=d===!0&&H(e);function h(b){if(b===!0){D(i),c.value=!0;return}c.value=!1,r.value===!1&&(l===!1&&u===null&&(u=R()),r.value=!0,m.push(e.proxy),K(i))}function a(b){if(c.value=!1,b!==!0)return;D(i),r.value=!1;const y=m.indexOf(e.proxy);y>-1&&m.splice(y,1),u!==null&&(j(u),u=null)}return Q(()=>{a(!0)}),Object.assign(e.proxy,{__qPortalInnerRef:o}),{showPortal:h,hidePortal:a,portalIsActive:r,portalIsAccessible:c,renderPortal:()=>l===!0?n():r.value===!0?[S(U,{to:u},n())]:void 0}}const le={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function ae(e,o){const n=E(o.value);return w(o,d=>{x(()=>{n.value=d})}),{transition:k(()=>"q-transition--"+(n.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:k(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const s=[];let g;function B(e){g=e.keyCode===27}function W(){g===!0&&(g=!1)}function z(e){g===!0&&(g=!1,G(e,27)===!0&&s[s.length-1](e))}function T(e){window[e]("keydown",B),window[e]("blur",W),window[e]("keyup",z),g=!1}function ue(e){F.is.desktop===!0&&(s.push(e),s.length===1&&T("addEventListener"))}function re(e){const o=s.indexOf(e);o>-1&&(s.splice(o,1),s.length===0&&T("removeEventListener"))}const f=[];function $(e){f[f.length-1](e)}function se(e){F.is.desktop===!0&&(f.push(e),f.length===1&&document.body.addEventListener("focusin",$))}function fe(e){const o=f.indexOf(e);o>-1&&(f.splice(o,1),f.length===0&&document.body.removeEventListener("focusin",$))}export{le as a,ee as b,ae as c,oe as d,ie as e,se as f,re as g,ue as h,A as i,te as j,ne as k,m as p,fe as r,Z as u};
